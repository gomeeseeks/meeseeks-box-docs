---
title: "Formatting"
anchor: "formatting"
weight: 50
---

There are multiple formatting options to customize your meeseeks experience.
They all start in the format section.

## Command Templates

Templates are used to render replies from the meeseeks, templating is done
using go [text/template](https://golang.org/pkg/text/template/) language.

The default templates can be a bit noisy depending on how the meeseeks are
used.

### Default Templates

```yaml
messages:
  handshake: "{{ AnyValue handshake . }}"
  failure: |
    "{{ .user }} {{ AnyValue failure . }} :disappointed: {{ .error }}
    {{ with $out := .output }}\n```\n{{ $out }}```{{ end }}"
  success: |
    "{{ .user }} {{ AnyValue success . }}
    {{ with $out := .output }}\n```\n{{ $out }}```{{ end }}"
  unknowncommand: |
    "{{ .user }} {{ AnyValue unknowncommand . }} {{ .command }}"
  unauthorized: |
    "{{ .user }} {{ AnyValue unauthorized . }} {{ .command }}"
```

### A simpler templates configuration

To lowed the amount of noise generated by the default mode it's possible to
set a simpler set of templates, like this:

```yaml
format:
  templates:
    handshake: "{{ .command }} accepted"
    success: "{{ .command }} succeeded {{ with $out := .output }}\n```\n{{ $out }}```{{ end }}"
    failure: "{{ .command }} failed: {{ .error }} {{ with $out := .output }}\n```\n{{ $out }}```{{ end }}"
    unknowncommand: "{{ .command }} is not a valid command"
    unauthorized: "{{ .command }} is not allowed to the requester"
```

### Payload fields

All replies have a set of fields which can be used together with the templating engine.

These are all the fields that can be included in a reply.

- **command** the command that was invoked.
- **args** the list of arguments that were passed to the command, separated by spaces.
- **user** the username of the user that invoked the command.
- **userlink** the user in link format, printing it will trigger a mention.
- **userid** the user ID.
- **channel** the channel name in which the command was requested.
- **channellink** the channel link, printing it results in a link to the channel.
- **channelid** the channel ID.
- **isim** a boolean indicating if the channel is an direct messaging channel.
- **error** the error text, if the payload includes an error.
- **output** the output of the command, if the command is returning an output in this reply.

## Messages

The messages used to reply in a conversation used in the default templates
can be changed. To do so add a messages section in the configuration file.

```yaml
format:
  messages:
    handshake:
    - "Message that will be shown when the bot accepts a job"
    failure:
    - "Message that will be shown when the job fails"
    success:
    - "Message that will be shown when the job succeeds"
    unknowncommand:
    - "Message that will be shown when the requested
      command is not registered"
    unauthorized:
    - "Message that will be shown when the user
      requesting a command is not authorized to run it"
```

There can be more than 1 message on each section, they will be picked randomly
when replying.

## Reply Style

The slack client supports sending messages with 2 styles:

- **`attachment`** (default) - The message is sent as an
  attachment, using a color decoration depending on what kind of message it is (read [below](#colors)).
- **`text`** - The message is sent in plain text, without any decorations. URLs and
  media are unfurled.

This can be changed for each message type by adding a formatting section to the
configuration file. Note that `handshake` can also be disabled entirely.

```yaml
format:
  reply_styles:
    handshake: disabled
    failure: attachment
    success: text
    unknowncommand: attachment
    unauthorized: attachment
```

## Colors

By default messages in attachment mode will show colors for errors, success and
info. These can be changed by adding a format section to the configuration file.

```yaml
format:
  colors:
    info: "#FFFFFF"
    success: "#CCCCCC"
    error: "#000000"
```

## Helper functions

There are a couple of functions that are added when rendering templates, these are useful to handle arrays, texts and some values.

- **`AnyValue`** will pick a random value from a string slice.
- **`HumanizeTime`** will print a time in human readable format, ex. _"6 hours ago"_
- **`HumanizeSize`** will print a size in human readable format, ex. _"100Mb"_
- **`HumanizeNumber`** will print a float in a human readable format, removing long trails of decimals.
- **`Join`** joins a string slice into a single string using a joining char.


## Configuration samples

[Here](https://github.com/gomeeseeks/meeseeks-box/tree/master/docs/examples/personas)
you can see a couple of configuration examples for different templates and
messages.
